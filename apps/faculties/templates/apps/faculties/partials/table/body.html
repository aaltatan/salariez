{% load i18n %}

<form 
hx-get="{% url 'faculties:bulk' %}" 
hx-swap="innerHTML"
hx-include="[data-include]"
x-data="{ selectedRows: [] }">

<c-table.table>

    <!-- start header -->
    <c-table.row cols="{{ columns_count }}" header default_column="name">

      {% if can_delete %}
        <c-table.check-all></c-table.check-all>
      {% endif %}

      <c-table.column-header 
      hx-get="{% url 'faculties:index' %}"
      hx-target="#faculties-table"
      default_column="name"></c-table.column-header>

    </c-table.row>

    {% if can_delete %}
    <c-table.unselect-all>
      {% if can_delete %}
        <c-table.action-input
          name="bulk_delete"
          value="{% translate 'delete'|title %}"
          title="{% translate 'delete'|title %}"
        ></c-table.action-input>
      {% endif %}
      </c-table.unselect-all>
    {% endif %}
    <!-- end header -->

    <!-- start rows -->
    <c-table.body>

        {% for obj in qs %}
          <c-table.row 
          cols="{{ columns_count }}" 
          id="instance-{{ obj.pk }}">

              {% if can_delete %}
                <c-table.absolute direction="left">
                  <c-table.check></c-table.check>
                </c-table.absolute>
              {% endif %}

              {% if can_update %}
                <a 
                class="hover:underline" 
                href="{{ obj.get_update_path }}">{{ obj.name }}</a>
              {% else %}
                <div>{{ obj.name }}</div>
              {% endif %}

              <c-table.absolute direction="right">

                {% if can_delete or can_update %}
                  <c-context.context 
                  class="ltr:right-[calc(100%+4px)] rtl:left-[calc(100%+4px)] bottom-2 min-w-[100px]">

                    {% if can_delete %}
                      <c-context.btn
                          hx-get="{{ obj.get_delete_path }}"
                          hx-vals="js:{page: '{{ page_obj.number }}'}"
                          hx-target="#modal"
                          hx-swap="innerHTML"
                          @click="modalOpen = true">
                          {% translate 'delete' %}
                      </c-context.btn>
                    {% endif %}

                    {% if can_update %}
                      <c-context.btn 
                      href="{{ obj.get_update_path }}"
                      datatype="href">
                          {% translate 'update' %}
                      </c-context.btn>
                    {% endif %}

                  </c-context.context>
                {% endif %}

              </c-table.absolute>

          </c-table.row>
        {% empty %}
          <c-table.empty-row></c-table.empty-row>
        {% endfor %}

    </c-table.body>
    <!-- end rows -->

</c-table.table>

</form>